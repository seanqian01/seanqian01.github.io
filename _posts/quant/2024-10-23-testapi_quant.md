---
layout:       post
title:        "国内商品期货交易接口接入基本流程"
author:       "Seanqian"
header-style: text
catalog:      true
tags:
    - 商品期货
    - 商品期货API
    - 期货接口接入
    - 量化交易
    - 量化交易API
    - 量化交易接入
    - 量化交易系统
    

---

这两天商品期货的接口接通了，还差个测试报告没搞，趁这个时候先完善下自己的业务系统框架，太多东西要做了。 国内商品期货想要系统自动化量化接口交易接口，基本上有这么几个步骤：
##### Tradingview找一个靠谱的券商
目前市面上的大部分期货券商都可以随便接入，但是其中的券商两极分化特别严重。一定要找到合适的券商接入进来，接入成本才不会被忽悠。
之前找了一些没有第三方平台背书或者推荐的券商，自己联系券商要接入接口，结果张嘴狮子大开口。要么交易手续费高，要么就要收取什么接口费用。
后来通过量化平台找了推荐券商，感觉还不错。

##### 一个即插即用的API接口包
在国内期货的柜台交易中，大部分券商的API接口包都是即插即用的，但是有些券商的API接口包需要自己写代码，这就比较麻烦了。所以，找一个即插即用的API接口包，可以大大减少开发成本和时间。
由于一直在用[openctp](https://github.com/openctp "openctp")这一家的python接口，看到他们家推荐的券商基本接入流程还标准。这时候还是蛮推荐大家从 这个openctp走的。
[模拟盘和模拟账户](http://www.openctp.cn/ "模拟盘和模拟账户")的接入，用这一家的接口也就行了，一举两得。
其实这个openctp最好用的是可以把它兼容的几家模拟环境的接口状态直接显示出来，众所周知的SIMNOW的接口经常下班打卡，有时候这个网站一打开我就知道当前测试要走哪个环境比较好了。整体非常好用的一个团队做的产品，赞一个！

##### 期货券商程序化接入流程化申报材料
  券商搞定之后，后面就是填一堆表格，开户表什么的一堆要填要签字。 具体见下图
![qianzi.png](https://s2.loli.net/2024/10/23/GfNWTnEOloZKsQ9.png)

  签字好后面就是接口测试：
![test.png](https://s2.loli.net/2024/10/23/TQNuC64ado8UVly.png)

接口里面openctp-ctp的python包非常好用，我的服务器用的是ubuntu，本地用windows和mac调试都没有问题，这家真的良心接口，基本没啥BUG，而且还定期更新，还是好好赞一下。

 接口中间最重要的是：
        行情查询接口
        条件单下单交易接口
        撤销交易接口
        结算确认接口
        账户查询接口

这几个接口，基本上是核心接口，其他的接口都是辅助的。具体接口调试的逻辑有时间另行分享，这里面东西太多。
这些接口我基本上都通了以后，券商那边还要做一些压力测试，用自己的接口多放一些交易订单笔数进去。 我估计由于之前接入接口都是搞高频量化为主的，这些券商测试接口的时候也是要做一些多笔数的压力测试的。

接入的测试做完以后，最后的部分来了，券商丢过来一个测试报告，要我提供截图 需要围绕下面的功能提供截图：
    指令测试---提供成交、委托的截图
    查询功能---提供查询界面截图
    验资验券---提供测试截图
    日志保存---提供日志记录截图及本地保存截图
    异常交易识别
    错单处理机制
    指令查询频率


基本上这些截图搞完，我估计我的业务系统也弄完善了。 到目前还在加班加点搞截图。 不太愿意走捷径去拿个VNPY的系统去跑截图，糊弄券商到最后还是糊弄自己。

算了还是按要求去搞吧。 搞完截图，基本上券商走完流程就可以开通商品期货的API接口了。

最近一段时间A股惨不忍睹。所以接口接入的门槛还是蛮好谈的。 如果牛市来临，就说不好了。

后面会继续更新关于自动化交易的细节。